# ========================================
# Configuration Spring Boot - D√©mineur Pro
# ========================================

# ========================================
# CONFIGURATION DU SERVEUR
# ========================================
server.port=80
server.servlet.context-path=/

# Nom de l'application
spring.application.name=Demineur Pro

# ========================================
# CONFIGURATION DE LA BASE DE DONN√âES MYSQL
# ========================================
# URL de connexion (modifiez si votre MySQL est sur un autre port ou serveur)
spring.datasource.url=jdbc:mysql://minesweeper-mysql:3306/Minesweeper?useUnicode=true&characterEncoding=UTF-8&connectionCollation=utf8mb4_unicode_ci&serverTimezone=UTC

spring.jpa.properties.hibernate.connection.CharSet=utf8mb4
spring.jpa.properties.hibernate.connection.characterEncoding=utf8mb4
spring.jpa.properties.hibernate.connection.useUnicode=true

# Identifiants MySQL
spring.datasource.username=root
spring.datasource.password=root

# Driver JDBC
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# Pool de connexions
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000

# ========================================
# CONFIGURATION JPA / HIBERNATE
# ========================================
# Strat√©gie de cr√©ation des tables
spring.jpa.hibernate.ddl-auto=update

# Afficher les requ√™tes SQL dans la console
spring.jpa.show-sql=false

# Formater les requ√™tes SQL pour une meilleure lisibilit√©
spring.jpa.properties.hibernate.format_sql=true

# Dialecte MySQL
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect

# Support UTF-8
spring.jpa.properties.hibernate.connection.characterEncoding=utf-8
spring.jpa.properties.hibernate.connection.useUnicode=true
spring.jpa.properties.hibernate.connection.CharSet=utf-8

# ========================================
# CONFIGURATION CORS
# ========================================
spring.web.cors.allowed-origins=*
spring.web.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
spring.web.cors.allowed-headers=*
spring.web.cors.allow-credentials=false

# ========================================
# CONFIGURATION JWT - AUTHENTIFICATION ADMIN
# ========================================
# IMPORTANT : Changez cette cl√© en production !
# G√©n√©rez une cl√© s√©curis√©e avec : openssl rand -base64 64
jwt.secret=vT4ZmfP9Kq2rHX7g0JpWcE1uBsd8RNyL3aVQGtZYeUFwCMkhSx9DbL60qTwfPnAj48rKzJmYQvP2nDgU0cHaLXsF19tSeKWuB5yZpNTRoF7lCiMxqG6bEjVwRh3kCf8u
jwt.expiration=86400000

# Dur√©e du token en millisecondes (86400000 = 24 heures)
# 3600000 = 1 heure
# 604800000 = 7 jours

# ========================================
# CONFIGURATION SPRING SECURITY
# ========================================
# Utilisateur admin par d√©faut
spring.security.user.name=admin
spring.security.user.password=admin123

# ========================================
# CONFIGURATION DES RESSOURCES STATIQUES
# ========================================
# Emplacement des fichiers statiques (HTML, CSS, JS)
spring.web.resources.static-locations=classpath:/static/

# Pattern d'URL pour acc√©der aux ressources statiques
spring.mvc.static-path-pattern=/**

# Cache des ressources statiques (en secondes)
spring.web.resources.cache.period=3600

# ========================================
# CONFIGURATION DES LOGS
# ========================================
# Niveau de log global
logging.level.root=INFO

# Logs de l'application
logging.level.com.minesweeper=DEBUG

# Logs Spring Security (pour d√©boguer l'authentification)
logging.level.org.springframework.security=DEBUG

# Logs Hibernate (requ√™tes SQL d√©taill√©es)
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Logs Spring Web
logging.level.org.springframework.web=INFO

# Logs JWT (pour d√©boguer les tokens)
logging.level.io.jsonwebtoken=DEBUG

# Format des logs dans la console
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# ========================================
# CONFIGURATION DES ACTUATORS (Monitoring)
# ========================================
# Endpoints disponibles: health, info, metrics
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always

# Informations de l'application
info.app.name=D√©mineur Pro
info.app.description=Jeu de d√©mineur avec API REST Spring Boot
info.app.version=1.0.0
info.app.encoding=@project.build.sourceEncoding@
info.app.java.version=@java.version@

# ========================================
# CONFIGURATION DE L'ENCODAGE
# ========================================
spring.http.encoding.charset=UTF-8
spring.http.encoding.enabled=true
spring.http.encoding.force=true

# ========================================
# CONFIGURATION POUR LA PRODUCTION
# ========================================
# D√©commentez ces lignes pour la production:

# D√©sactiver l'affichage des erreurs d√©taill√©es
# server.error.include-message=never
# server.error.include-binding-errors=never
# server.error.include-stacktrace=never
# server.error.include-exception=false

# Activer la compression des r√©ponses HTTP
# server.compression.enabled=true
# server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json

# S√©curit√© HTTP
# server.servlet.session.timeout=30m
# server.servlet.session.cookie.http-only=true
# server.servlet.session.cookie.secure=true

# ========================================
# NOTES IMPORTANTES
# ========================================
#
# üîß POUR MODIFIER LA CONFIGURATION SANS RECOMPILER :
#    Cr√©ez un fichier application.properties √† c√¥t√© du JAR
#    Exemple: java -jar demineur-app.jar --spring.datasource.password=monmotdepasse
#
# üîë AUTHENTIFICATION ADMIN :
#    - Par d√©faut : admin / admin123
#    - Le token JWT expire apr√®s 24 heures
#    - Routes prot√©g√©es : /api/admin/** (sauf /api/admin/login)
#
# üåê POUR CHANGER LE PORT :
#    java -jar demineur-app.jar --server.port=8080
#
# üöÄ EN PRODUCTION :
#    - Changez jwt.secret avec une vraie cl√© s√©curis√©e
#    - Changez spring.datasource.password
#    - Changez spring.web.cors.allowed-origins=* en votre domaine
#    - Mettez spring.jpa.show-sql=false
#    - D√©sactivez logging.level.org.springframework.security=DEBUG
#    - Activez les options de s√©curit√© comment√©es ci-dessus
#
# üîó ACC√àS AUX ENDPOINTS :
#    - Application : http://localhost
#    - API Health : http://localhost/api/health
#    - Admin Login : http://localhost/api/admin/login
#    - Actuator Health : http://localhost/actuator/health
#    - Actuator Info : http://localhost/actuator/info
#
# ========================================
